{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\ndocument.addEventListener('DOMContentLoaded', () => {\n    const datetimePicker = document.getElementById('datetime-picker');\n    const startButton = document.querySelector('[data-start]');\n    const daysSpan = document.querySelector('[data-days]');\n    const hoursSpan = document.querySelector('[data-hours]');\n    const minutesSpan = document.querySelector('[data-minutes]');\n    const secondsSpan = document.querySelector('[data-seconds]');\n\n    let userSelectedDate = null;\n    let timerId = null;\n\n    const options = {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n            userSelectedDate = selectedDates[0];\n            if (userSelectedDate <= new Date()) {\n                iziToast.error({\n                    title: 'Error',\n                    message: 'Please choose a date in the future',\n                });\n                startButton.disabled = true;\n            } else {\n                startButton.disabled = false;\n            }\n        },\n    };\n\n    flatpickr(datetimePicker, options);\n    startButton.disabled = true;\n\n    startButton.addEventListener('click', () => {\n        if (timerId) {\n            clearInterval(timerId);\n        }\n\n        timerId = setInterval(() => {\n            const now = new Date();\n            const timeLeft = userSelectedDate - now;\n\n            if (timeLeft <= 0) {\n                clearInterval(timerId);\n                updateTimerDisplay(0, 0, 0, 0);\n                return;\n            }\n\n            const { days, hours, minutes, seconds } = convertMs(timeLeft);\n            updateTimerDisplay(days, hours, minutes, seconds);\n        }, 1000);\n\n        startButton.disabled = true;\n        datetimePicker.disabled = true;\n    });\n\n    function updateTimerDisplay(days, hours, minutes, seconds) {\n        daysSpan.textContent = addLeadingZero(days);\n        hoursSpan.textContent = addLeadingZero(hours);\n        minutesSpan.textContent = addLeadingZero(minutes);\n        secondsSpan.textContent = addLeadingZero(seconds);\n    }\n\n    function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    }\n\n    function addLeadingZero(value) {\n        return String(value).padStart(2, '0');\n    }\n});"],"names":["datetimePicker","startButton","daysSpan","hoursSpan","minutesSpan","secondsSpan","userSelectedDate","timerId","flatpickr","selectedDates","iziToast","timeLeft","updateTimerDisplay","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"+IAKA,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAmB,KACnBC,EAAU,KAqBdC,EAAUR,EAnBM,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQS,EAAe,CACnBH,EAAmBG,EAAc,CAAC,EAC9BH,GAAoB,IAAI,MACxBI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCAC7B,CAAiB,EACDT,EAAY,SAAW,IAEvBA,EAAY,SAAW,EAE9B,CACT,CAEqC,EACjCA,EAAY,SAAW,GAEvBA,EAAY,iBAAiB,QAAS,IAAM,CACpCM,GACA,cAAcA,CAAO,EAGzBA,EAAU,YAAY,IAAM,CAExB,MAAMI,EAAWL,EADL,IAAI,KAGhB,GAAIK,GAAY,EAAG,CACf,cAAcJ,CAAO,EACrBK,EAAmB,EAAG,EAAG,EAAG,CAAC,EAC7B,MACH,CAED,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAQ,EAC5DC,EAAmBC,EAAMC,EAAOC,EAASC,CAAO,CACnD,EAAE,GAAI,EAEPf,EAAY,SAAW,GACvBD,EAAe,SAAW,EAClC,CAAK,EAED,SAASY,EAAmBC,EAAMC,EAAOC,EAASC,EAAS,CACvDd,EAAS,YAAcgB,EAAeL,CAAI,EAC1CV,EAAU,YAAce,EAAeJ,CAAK,EAC5CV,EAAY,YAAcc,EAAeH,CAAO,EAChDV,EAAY,YAAca,EAAeF,CAAO,CACnD,CAED,SAASC,EAAUE,EAAI,CAMnB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EACjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAED,SAASE,EAAeE,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACL,CAAC"}